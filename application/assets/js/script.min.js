$(document).ready(function(){var t,s=[],a=0,i=0,r=[],n=0;function o(e){"+1"==e&&(++i<=items.length&&$("div[tabindex="+i+"]").focus(),i==items.length&&(i=0,$("div[tabindex=0]").focus())),"-1"==e&&(0<=--i&&$("div[tabindex="+i+"]").focus(),-1==i&&(i=items.length-1,$("div[tabindex="+i+"]").focus()))}function d(){$("div#finder div.items:visible");items=$("div#app-list > div.items:visible");for(var e=-1;e<items.length;e++)$(items[e]).attr("tabindex",e),i=0,$("div#finder").find("div.items[tabindex=0]").focus()}$("div#window-status").text(!1),function(){s.length=0;var e=new Applait.Finder({type:"sdcard",debugMode:!0});e.on("empty",function(e){}),e.search("translator.json"),e.on("fileFound",function(e,t,a){var i=new FileReader;i.onerror=function(e){alert("shit happens"),i.abort()},i.onloadend=function(e){search_result=e.target.result;var t=JSON.parse(search_result);$.each(t,function(e,t){null==t.dir?s.push([t.app_name,"root"]):s.push([t.app_name,t.dir]),t.weather&&(openweather_api=t.weather.owm_api_key,""==openweather_api&&$("div#weather-wrapper").remove(),$.each(t.weather.location,function(e,t){r.push([e,t.position_lat,t.position_long])})),t.sleep_mode&&(startTime=t.sleep_mode.startTime,duration_h=t.sleep_mode.duration_h,duration_m=t.sleep_mode.duration_m,sleep())}),listApps(),$(".page").each(function(){var e=$(this).attr("id");pages_arr.push(e)})},i.readAsText(e)}),$("div#finder").find("div.items[tabindex=0]").focus()}();var c=0,p=!1;document.addEventListener("keydown",function(e){switch(e.key){case"Enter":p=!1,c=0,t=setInterval(function(){2<++c&&(p=!0),c<2&&(p=!1)},1e3),quick_settings_toggle();break;case"Backspace":e.preventDefault(),0==n&&window.close(),1==n&&($("div.items").css("display","block"),$("div.items").children(".dir-name").css("display","block"),$("div.items").children(".app-name").css("display","none"),$("div.child-of-dir").css("display","none"),$("div#finder").find("div.items[tabindex=0]").focus(),$("div#finder div#app-list .dir").css("border-left","4px solid silver"),n=i=0,d())}}),document.addEventListener("keyup",function(e){switch(clearInterval(t),e.key){case"Enter":0==p&&(launchApp(),function(){if("menu"==pages_arr[a]){var e=$(":focus")[0];current_lng=e.getAttribute("data-long"),current_lat=e.getAttribute("data-lat"),location_name=$(e).text(),$("h1#location_name").text(location_name),$("div#weather-wrapper div#locations").css("display","none"),$("div#weather-wrapper div#location").css("display","block"),weather("notgeolocation")}}()),1==p&&delete_app();break;case"Backspace":e.preventDefault();break;case"ArrowDown":o("+1");break;case"ArrowUp":o("-1");break;case"ArrowRight":o("slide_right");break;case"ArrowLeft":o("slide_left");break;case"SoftLeft":!function(){i=0,$("div#weather-wrapper div#locations").find("div.items[tabindex=0]").focus(),k=-1,$("div#weather-wrapper div#locations").empty();for(var e=0;e<r.length;e++)k++,$("div#weather-wrapper div#locations").append("<div class='items' tabindex="+k+" data-lat="+r[e][1]+" data-long="+r[e][2]+">"+r[e][0]+"</div>");"weather-wrapper"==pages_arr[a]&&($("div#weather-wrapper div#locations").css("display","block"),$("div#weather-wrapper div#location").css("display","none"),$("div#weather-wrapper div#locations div").first().focus(),items=document.querySelectorAll("div#weather-wrapper div#locations > div.items"))}();break;case"1":focus_shortcut(0);break;case"2":focus_shortcut(1);break;case"3":focus_shortcut(2);break;case"4":focus_shortcut(3);break;case"5":focus_shortcut(4);break;case"6":focus_shortcut(5);break;case"7":focus_shortcut(6);break;case"8":focus_shortcut(7);break;case"9":focus_shortcut(8);break;case"0":listApps(!0)}})});